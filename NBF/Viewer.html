<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>		
 	<script src="https://rawgit.com/jeromeetienne/ar.js/master/aframe/build/aframe-ar.js"></script>
	<script>THREEx.ArToolkitContext.baseURL = 'https://rawgit.com/jeromeetienne/ar.js/master/three.js/'</script>
<script>
	AFRAME.registerComponent('click-listener', {
	  init: function () {

	var el = this.el;
	const mdl = document.querySelector('#ModelId');
	const txt = document.querySelector('#ModelTxt');
	const sTxt = document.querySelector('#StartTxt');
	const _mdlCnt = 3;

	window.addEventListener('click', function () {
		var MI = document.getElementById('ModelIndex');
		sTxt.setAttribute('text-geometry', 'value:');

		    var i = 0;
		    i += parseFloat(MI.innerHTML);
			i += 1;
		    if (i > _mdlCnt)
			i = 1;
		    MI.innerHTML = i;
		    if (i==1) {
			mdl.setAttribute('obj-model', 'obj: #bear-obj;');
			mdl.setAttribute('scale', '0.01 0.01 0.01');
			//mdl.setAttribute('position', '0 0 0');
			mdl.innerHTML = "<a-animation attribute='rotation' dur='8000' easing='linear' repeat='indefinite' to='0 360 0'></a-animation>";
			txt.setAttribute('text-geometry', 'value:');
			txt.setAttribute('position', '-1.5 0 1.5');
		    }
		    else if (i==2) {
			mdl.setAttribute('obj-model', 'obj: #brawler-obj;');
			mdl.setAttribute('scale', '0.25 0.25 0.25');
			//mdl.setAttribute('position', '0 0 0');
			mdl.innerHTML = "<a-animation attribute='rotation' dur='8000' easing='linear' repeat='indefinite' to='0 360 0'></a-animation><a-entity position='0 0 0' particle-system='preset: rain; color: #EF0000,#44CC00'></a-entity>";
			txt.setAttribute('text-geometry', 'value:');
			txt.setAttribute('position', '-1.8 0 1.5');
		    }
		    else if (i==3) {
			mdl.setAttribute('obj-model', 'obj: #cube-obj; mtl: #cube-mtl;');
			mdl.setAttribute('scale', '0.05 0.05 0.05');
			txt.setAttribute('text-geometry', 'value:');
			txt.setAttribute('position', '-1.4 0 1.5');
			mdl.innerHTML = "<a-animation attribute='rotation' dur='8000' easing='linear' repeat='indefinite' to='0 360 0'></a-animation><a-entity position='0 0 0' particle-system='preset: rain; color: #EF0000,#44CC00'></a-entity><a-entity position='0 0 0' particle-system='color: #EF0000,#44CC00'></a-entity>";
		    }
	    });
	  }
	});
</script>
</head>
<body style='margin : 0px; overflow: hidden;'>
	<a-scene embedded artoolkit='sourceType: webcam;'>
	  <a-assets>
		<a-asset-item id="brawler-obj" src="./Objects/BrawlerSmoothFists.obj"></a-asset-item>
		<a-asset-item id="bear-obj" src="./Objects/LancerBear.obj"></a-asset-item>
	  	<a-asset-item id="cube-obj" src="./Objects/TheCubeFull.obj"></a-asset-item>
		<a-asset-item id="cube-mtl" src="./Objects/TheCubeFull.mtl"></a-asset-item>
		<img id="sharpie" src='./markers/ARBattleRock7.png'>
	  </a-assets>
		<!--Marker World!-->
		<a-marker type='pattern' url='./markers/briii.patt'><!--<a-marker type='unknown' url='#sharpie'>-->
			<a-entity id="ModelId" material='opacity: 0.8; color: red' scale="0.05 0.05 0.05"> <!--obj-model="obj: #cube-obj; mtl: #cube-mtl;">-->
				<a-animation attribute='rotation' dur='8000' easing='linear' repeat='indefinite' to='0 360 0'></a-animation>
				<a-entity position='0 0 0' particle-system='color: #EF0000,#44CC00'></a-entity>
			</a-entity>
			<a-entity position="-2.5 0 1.5" rotation="-30 0 0" color="black" id="ModelTxt" text-geometry="value: Studios;" scale="" visible=""></a-entity>
			<a-entity position="-1 1 1.5" rotation="-30 0 0" scale="0.5 0.5 0.5" color="black" id="StartTxt" text-geometry="value: BATTLEROCK;" rotation="" visible=""></a-entity>
			<div id="ModelIndex">0</div>
		</a-marker>
		<a-entity camera click-listener></a-entity>
	</a-scene>
</body>
</html>
