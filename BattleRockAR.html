<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>
	<script src="https://rawgit.com/jeromeetienne/ar.js/master/aframe/build/aframe-ar.js"></script>
	<script>THREEx.ArToolkitContext.baseURL = 'https://rawgit.com/jeromeetienne/ar.js/master/three.js/'</script>
	<!--<script src="./Scripts/aframe-particle-system-component.min.js"></script>-->
	
	<script>
	// click-listener component to pass window clicks to an entity.
	AFRAME.registerComponent('click-listener', {
	  	init: function () {
		var el = this.el;
		const mdl = document.querySelector('#ModelId');
		const _mdlCnt = 3;
			  
		window.addEventListener('click', function () {
			var MI = document.getElementById('ModelIndex');
			    var i = 0;
			    i += parseFloat(MI.innerHTML);
				i += 1;

			    if (i > _mdlCnt)
				i = 1;
			    MI.innerHTML = i;
			    if (i==1) {
						mdl.setAttribute('obj-model', 'obj: #bear-obj;');
						mdl.setAttribute('scale', '0.01 0.01 0.01');
						mdl.setAttribute('position', '0 0 0');
			    }
			    else if (i==2) {
						mdl.setAttribute('obj-model', 'obj: #brawler-obj;');
						mdl.setAttribute('scale', '0.25 0.25 0.25');
						mdl.setAttribute('position', '0 0 0');
			    }
			    else if (i==3) {
						mdl.setAttribute('obj-model', 'obj: #cube-obj;');
						mdl.setAttribute('scale', '0.05 0.05 0.05');
						//Init();
			    }
				else if (i==4) {
						mdl.setAttribute('obj-loader', 'url(./Objects/DynamoSitting1.obj)');
						mdl.setAttribute('scale', '0.05 0.05 0.05');
						//removeElementsByClass('flames');
			    }
		    });
		  }
		});
	</script>
	<script>
	//function Init() {
        //    const mScene = document.getElementById('TheScene');
        //    const posArr = [-10,-9,-8,-7,-6,-5,-4,4,5,6,7,8,9,10];
        //   	var catCnt = 6;
        //    //removeElementsByClass('flames');

 	//	for(var i = 0; i<catCnt; i++){
        //        var tempArr = shuffleArray(posArr);
                
        //        var temp = document.createElement('a-entity');
        //        setAttributes(temp, {
        //            "geometry": "'primitive:circle;segments:9;radius:3.0sawsaw;'",
        //            "material": "'shader:gif;src:url(img/cat_lg.gif);opacity:.8'",
        //            "class": "flames",
        //            "scale":"1 1 1"
        //        });
        //        mScene.appendChild(temp);
        //    }
        //};
	function shuffleArray(array) {
            for (var i = array.length - 1; i > 0; i--) {
                var j = Math.floor(Math.random() * (i + 1));
                var temp = array[i];
                array[i] = array[j];
                array[j] = temp;
            }
            return array;
        };
	function removeElementsByClass(className) {
            var elements = document.getElementsByClassName(className);
            while (elements.length > 0) {
                elements[0].parentNode.removeChild(elements[0]);
            }
        };
	function setAttributes(el, attrs) {
            for (var key in attrs) {
                el.setAttribute(key, attrs[key]);
            }
        };
	</script>
</head>
<body style='margin : 0px; overflow: hidden;'>
	<a-scene stats embedded id="TheScene" artoolkit='sourceType: webcam; detectionMode: mono; maxDetectionRate: 30; canvasWidth: 240; canvasHeight: 180'>
	<!--<a-scene embedded artoolkit='sourceType: webcam;' id="TheScene">-->
	  <a-assets>
		<a-asset-item id="brawler-obj" src="./Objects/BrawlerSmoothFists.obj"></a-asset-item>
		<a-asset-item id="bear-obj" src="./Objects/LancerBear.obj"></a-asset-item>
	  	<a-asset-item id="cube-obj" src="./Objects/TheCube1.obj"></a-asset-item>
	  </a-assets>
		<!--
		<a-entity position="-2.5 0 1.5" rotation="-30 0 0" color="black" id="ModelTxt" text-geometry="" scale="" visible=""></a-entity>
		<a-entity position="-1 1 1.5" scale="0.5 0.5 0.5" color="black" id="StartTxt" text-geometry="" rotation="" visible=""></a-entity>
		-->
		<!--
		<a-entity position="0 2.25 -15" particle-system="color: #EF0000,#44CC00"></a-entity>
		<a-marker url='./markers/ARBattleRock7.png' id="modelMarker">-->
		<!--	<a-entity position="1 2 -10" 
                particle-system="color: #EF0000,#44CC00"></a-entity>
      			<a-entity position="-1 -2 -10" 
                particle-system="color: #EF0000,#44CC00"></a-entity>-->
  
			<a-entity id="ModelId" material='opacity: 0.8; color: red' scale="0.25 0.25 0.25" obj-model="obj: #brawler-obj;">
				<a-animation attribute="rotation" dur="6000" easing="linear" repeat="indefinite" to="0 360 0"></a-animation>
			</a-entity>
			<div id="ModelIndex">0</div>
		<!--</a-marker>-->
		
		<!-- handle unknown marker 
		<a-marker type='unknown'>
			<a-box depth="1" height="1" width="1" position='0 0 0.5' material='opacity: 0.5; side:double; color:blue;'></a-box>
		</a-marker>-->
		<!--<a-entity position='0 0 0.5' rotation="0 180 0" material='opacity: 0.5;' scale="0.2 0.2 0.2" obj-model="obj: #brawler-obj;"></a-entity>
		<a-box position='0 0 0.5' material='opacity: 0.5;'></a-box>
		<a-entity position='0 0 0.5' material='opacity: 0.5;' scale="0.01 0.01 0.01" obj-model="obj: #bear-obj;"></a-entity>
		<a-marker-camera url='./markers/ARBattleRock.png' ></a-marker-camera>-->
		
		<!-- handle bear marker 
		<a-marker url='./markers/ARBattleRock2.png'>
			<a-entity position='0 0 0.5' rotation="0 180 0" material='opacity: 0.5;' scale="0.2 0.2 0.2" obj-model="obj: #bear-obj;"></a-entity>
		</a-marker>-->
		
		<!--<a-entity id="camera" camera click-listener></a-entity>-->
		<a-marker-camera url='./markers/ARBattleRock7.png' id="modelMarker"> click-listener></a-marker-camera>
		
	</a-scene>
</body>
</html>
