<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>
	<script src="https://rawgit.com/jeromeetienne/ar.js/master/aframe/build/aframe-ar.js"></script>
	<script>THREEx.ArToolkitContext.baseURL = 'https://rawgit.com/jeromeetienne/ar.js/master/three.js/'</script>
	<script src="https://unpkg.com/aframe-text-geometry-component@0.5.x/dist/aframe-text-geometry-component.min.js" data-component-description="Geometry-based text for A-Frame" data-component-names="text-geometry" data-component-url="https://npmjs.com/package/aframe-text-geometry-component" data-package-name="aframe-text-geometry-component"></script>
	<script>
		// click-listener component to pass window clicks to an entity.
		AFRAME.registerComponent('click-listener', {
		  init: function () {
			  
		var el = this.el;
	    	const mdl = document.querySelector('#ModelId');
		const txt = document.querySelector('#ModelTxt');
                const sTxt = document.querySelector('#StartTxt');
		const _mdlCnt = 3;
			  
		window.addEventListener('click', function () {
			console.log("CLICK!!!");
			var MI = document.getElementById('ModelIndex');
                    	sTxt.setAttribute('text-geometry', 'value:');
			
			    var i = 0;
			    i += parseFloat(MI.innerHTML);
				i += 1;

			    if (i > _mdlCnt)
				i = 1;
			    MI.innerHTML = i;
			    if (i==1) {
				//mdl.setAttribute('obj-loader', 'url(./Objects/LancerBear.obj)');
				mdl.setAttribute('obj-model', 'obj: #bear-obj;');//'obj:Objects/LancerBear.obj');
				mdl.setAttribute('scale', '0.01 0.01 0.01');
				mdl.setAttribute('position', '0 0 0');
				txt.setAttribute('text-geometry', 'value: Bear Lancer');
				txt.setAttribute('position', '-1.5 0 1.5');
			    }
			    else if (i==2) {
				//mdl.setAttribute('obj-loader', 'url(./Objects/BrawlerSmoothFists.obj)');
				mdl.setAttribute('obj-model', 'obj: #brawler-obj;');
				mdl.setAttribute('scale', '0.25 0.25 0.25');
				mdl.setAttribute('position', '0 0 0');
				txt.setAttribute('text-geometry', 'value: The Brawler');
				txt.setAttribute('position', '-1.8 0 1.5');
			    }
			    else if (i==3) {
				//mdl.setAttribute('obj-loader', 'url(./Objects/DynamoSitting1.obj)');
				mdl.setAttribute('obj-model', 'obj: #cube-obj;');
				mdl.setAttribute('scale', '0.03 0.03 0.03');
				mdl.setAttribute('position', '0 0 -2.5');
				txt.setAttribute('text-geometry', 'value: KCCD');
				txt.setAttribute('position', '-1.5 0 1.5');
			    }
		    });
		  }
		});
	</script>
</head>
<body style='margin : 0px; overflow: hidden;'>
	<a-scene embedded artoolkit='sourceType: webcam;'>
	  <a-assets>
		<a-asset-item id="brawler-obj" src="./Objects/BrawlerSmoothFists.obj"></a-asset-item>
		<a-asset-item id="bear-obj" src="./Objects/LancerBear.obj"></a-asset-item>
	  	<a-asset-item id="cube-obj" src="./Objects/TheCube1.obj"></a-asset-item>
	  </a-assets>
		<a-entity position="-2.5 0 1.5" rotation="-30 0 0" color="black" id="ModelTxt" text-geometry="" scale="" visible=""></a-entity>
		<a-entity position="-1 1 1.5" scale="0.5 0.5 0.5" color="black" id="StartTxt" text-geometry="" rotation="" visible=""></a-entity>
		<!--
		<a-entity position='0 0 0.5' rotation="0 180 0" material='opacity: 0.5;' scale="0.2 0.2 0.2" obj-model="obj: #brawler-obj;"></a-entity>
		<a-box position='0 0 0.5' material='opacity: 0.5;'></a-box>
		<a-entity position='0 0 0.5' material='opacity: 0.5;' scale="0.01 0.01 0.01" obj-model="obj: #bear-obj;"></a-entity>
		<a-marker-camera url='./markers/ARBattleRock.png' ></a-marker-camera>
		-->
		<!-- handle unknown marker -->
		<a-marker type='unknown'>
			<!--<a-box depth="1" height="1" width="1" position='0 0 0.5' material='opacity: 0.5; side:double; color:blue;'></a-box>-->
		</a-marker>

		<!-- handle brawler marker -->
		<a-marker url='./markers/ARBattleRock7.png'>
			<a-entity id="ModelId" material='opacity: 0.8; color: red' scale="0.25 0.25 0.25" obj-model="obj: #brawler-obj;">
				<a-animation attribute="rotation" dur="3000" easing="linear" repeat="indefinite" to="0 360 0"></a-animation>
			</a-entity>
			<a-entity position="-2.5 0 1.5" rotation="-30 0 0" color="black" id="ModelTxt" text-geometry="" scale="" visible=""></a-entity>
			<a-entity position="-1 1 1.5" scale="0.5 0.5 0.5" color="black" id="StartTxt" text-geometry="" rotation="" visible=""></a-entity>
			<div id="ModelIndex">2</div>
		</a-marker>
		
		<!-- handle bear marker 
		<a-marker url='./markers/ARBattleRock2.png'>
			<a-entity position='0 0 0.5' rotation="0 180 0" material='opacity: 0.5;' scale="0.2 0.2 0.2" obj-model="obj: #bear-obj;"></a-entity>
		</a-marker>-->
		
		<!-- add a simple camera -->
		<a-entity camera click-listener></a-entity>
		
		
		
		
		
	</a-scene>
</body>
</html>
